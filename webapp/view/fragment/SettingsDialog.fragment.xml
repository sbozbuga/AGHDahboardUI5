<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:core="sap.ui.core">
	<Dialog
		id="settingsDialog"
		title="Settings"
		contentWidth="400px">
		<content>
			<VBox class="sapUiSmallMargin">
				<Label text="AdGuard Home Base URL" labelFor="baseUrlInput" />
				<Input
					id="baseUrlInput"
					value="{/baseUrl}"
					placeholder="e.g. http://192.168.1.50 or http://192.168.1.50/agh"
					width="100%" />
				<Text text="Leave empty to use relative path (Proxy Mode)." class="sapUiTinyMarginBottom" />

				<Label text="Gemini API Key" labelFor="apiKeyInput" class="sapUiSmallMarginTop"/>
				<Input
					id="apiKeyInput"
					value="{/apiKey}"
					placeholder="Enter your Gemini API Key"
					type="Password"
					showValueHelp="true"
					valueHelpIconSrc="sap-icon://show"
					valueHelpRequest=".onToggleApiKeyVisibility"
					width="100%"
					maxLength="100" />
				<Label text="Gemini Model" labelFor="modelSelect" class="sapUiSmallMarginTop"/>
				<Select
					id="modelSelect"
					selectedKey="{/selectedModel}"
					items="{/availableModels}"
					width="100%">
					<core:Item key="{key}" text="{text}" />
				</Select>
				<Label text="System Context (Optional)" labelFor="contextInput" class="sapUiSmallMarginTop"/>
				<TextArea
					id="contextInput"
					value="{/systemContext}"
					placeholder="Describe your network (e.g., Raspberry Pi 5, Unbound, IoT devices...)"
					rows="4"
					width="100%"
					maxLength="500" />
				<Text text="Your API key is stored locally in your browser." class="sapUiTinyMarginTop sapUiSmallMarginBottom" />
                <Link text="Get an API Key" href="https://aistudio.google.com/app/apikey" target="_blank" />
			</VBox>
		</content>
		<buttons>
			<Button text="Save" press="onSaveSettings" type="Emphasized" />
			<Button text="Cancel" press="onCancelSettings" />
		</buttons>
	</Dialog>
</core:FragmentDefinition>
